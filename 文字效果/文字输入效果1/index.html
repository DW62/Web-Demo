<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>文字输入效果1</title>
</head>

<body>
    <div class="typeing blink">How are you!</div>
    <script>
        let spendNum = 120; //速度

        const typeingDoms = Array.from(document.querySelectorAll(".typeing"));
        typeingDoms.forEach((dom) => {
            dom.count = 0; //给dom添加一个属性icount 值为0
            dom.content = dom.innerHTML; //给dom添加一个属性content 值为文本内容
            dom.innerHTML = "";//将原来内容改为空

            updateTypeing(dom);
        });
        //更新文本
        function updateTypeing(dom) {
            //更新动画
            dom.classList.remove("blink");
            setTimeout(() => dom.classList.add("blink"), 200);

            //更新输入
            const text = dom.content;
            let index = dom.count;
            const t = text[index];
            dom.append(t);//添加值

            let d = spendNum;
            //更新index
            index++;
            if (index >= text.length) {
                index = 0;
                //更新延迟
                d = spendNum * 20;

                setTimeout(() => {
                    dom.innerHTML = "";
                }, d / 2);
            } else {
                if (t === " ") {
                    //更新延迟
                    d = spendNum * 2;
                }
            }
            dom.count = index;

            //下次更新
            setTimeout(updateTypeing, d, dom);
        }
    </script>
</body>

</html>